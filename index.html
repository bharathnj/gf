<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Global Foundries | Home</title>

    <!-- CSS  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
	<link href="css/custom.css" type="text/css" rel="stylesheet" />
	
	<style type="text/css">
		.preloader-background {
			display: flex;
			align-items: center;
			justify-content: center;
			background-color: #eee;
			position: fixed;
			z-index: 100;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;	
		}
	</style>
</head>
<body>
	    <!-- Navigation Bar Section-->
   <div class="navbar-fixed">
    <nav class="white" role="navigation">
        <div class="nav-wrapper container">
        <a id="logo-container" href="#" class="brand-logo">
            <img class="logo" src="images/logo.png" style="width: 270px; margin-left: 51px; margin-top:13px;" />
            <a href="#" data-activates="slide-out" style="display: list-item;" class="button-collapse"><i class="material-icons">menu</i></a>
        </a>
        <ul class="right hide-on-med-and-down">
            <li class="active"><a href="index.html">Home</a></li>
			<li><a href="details.html">Details</a></li>
			<li><a class="waves-effect waves-light btn modal-trigger" target="_blank" href="addpartner.html">+ Add Partner</a></li>
            <li><a class="waves-effect waves-light btn edit-button" href="login.html">Logout</a></li>
        </ul>
        </div>
    </nav>
    </div>


    <!-- Side Nav -->
    <ul id="slide-out" class="side-nav">
        <li>
            <div class="user-view">
                <div class="background">
                    <img src="images/office.jpg">
                </div><br>
                <a href="#!name"><span class="white-text name">User Name</span></a>
                <a href="#!email"><span class="white-text email">User Name@domain.com</span></a>
            </div>
        </li>
        <li><a class="waves-effect" href="index.html"><i class="material-icons">ac_unit</i>Home</a></li>
		        <li><a class="waves-effect" href="details.html"><i class="material-icons">details</i>Details</a></li>
        <li><a class="waves-effect modal-trigger" href="addpartner.html" target="_blank"><i class="material-icons">person_add</i>Add Partner</a></li>
        <li><div class="divider"></div></li>
        <li><a class="waves-effect" href="#!"><i class="material-icons">settings</i>Settings</a></li>
		<li><a class="waves-effect" href="logout.html"><i class="material-icons">close</i>Logout</a></li>
    </ul>
	
	<!-- pre loader-->
	<div class="preloader-background">
	<div class="preloader-wrapper big active">
		<div class="spinner-layer spinner-blue-only">
			<div class="circle-clipper left">
				<div class="circle"></div>
			</div>
			<div class="gap-patch">
				<div class="circle"></div>
			</div>
			<div class="circle-clipper right">
				<div class="circle"></div>
			</div>
		</div>
	</div>
	</div>
	
	
	<!-- Partner Details-->
	<br>
    <div class="container">
		<table class="striped responsive-table">
        <thead>
          <tr>
			  <th>Sl No.</th>
			  <th>Partner Id</th>
              <th>Trading Partner</th>
              <th>Description</th>
			  <th>Service State</th>
			  <th>Start Service</th>
			  <th>Stop Service</th>
			  <th>Edit Service</th>
          </tr>
        </thead>

        <tbody id="tbody">
        </tbody>
      </table>
    </div>
	
	 <!--Edit Service Modal Structure -->
	  <div id="edit_modal" class="modal modal-fixed-footer">
		<div class="modal-content">
		  <h6 class="ucheading">Edit Partner</h6><br>
			<div class="container">
				<div class="row">
					<form class="col s12 m12 l12">
							<div class="col s12 m12 l12">
                                <div class="input-field col s3"> 
                                    <input id="partner_name" type="text" class="validate" value="Partner1">
                                    <label for="partner_name">Partner Name</label>
                                </div>
								<div class="input-field col s3">
                                    <input id="partner_id" type="text" class="validate" value="GFP_1">
                                    <label for="partner_id">Partner Id</label>
                                </div>
								<div class="input-field col s3">
                                    <input id="proxy_service_port" type="text" class="validate" value="8089">
                                    <label for="proxy_service_port">Proxy Service Port</label>
                                </div>
								<div class="input-field col s3">
                                    <input id="tp_port" type="text" class="validate" value="80">
                                    <label for="tp_port">TP Port</label>
                                </div>
                            </div>
                            <div class="col s12 m12 l12">
                                <div class="input-field col s6"> 
                                    <input id="tp_url" type="text" class="validate" value="http://tpurl.com">
                                    <label for="tp_url">TP URL</label>
                                </div>
								<div class="input-field col s6"> 
                                    <input id="partner_description" type="text" class="validate" value="Description goes here....">
                                    <label for="partner_description">Description</label>
                                </div>
                            </div>
							<div class="col s12 m12 l12">
								<div class="input-field">
									<div id="certificate_name" class="chips chips-initial"></div>
									<label for="certificate_name">Certificates</label>
								</div>
								<div class="file-field input-field col s8">
									<div class="btn" style="height: 2em; line-height: 2em;">
										<span>.jar File</span>
										<input type="file" multiple>
									</div>
									<div class="file-path-wrapper">
										<input class="file-path validate" type="text" placeholder="Upload Partner .jar file">
									</div>
								</div>
							</div>
					</form>
				</div>
			</div>
		  
		</div>
		<div class="modal-footer">
			<a href="#!" class="modal-action modal-close waves-effect btn-flat ">Close</a>
			<a href="#!" class="modal-action waves-effect waves-green btn-flat ">Update</a>
		  
		</div>
	  </div>

	  <!--  Scripts-->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="js/materialize.js"></script>
    <script src="js/init.js"></script>
	<script type="text/javascript">
	
	$(document).ready(function(){
	$('.preloader-background').delay(500).fadeIn('slow');
	$.ajax({ 
			type: 'GET', 
            url: 'https://api.myjson.com/bins/fb00p',
			heders: {"Accept": "application/json; odata=verbose"},
            dataType:'json',
            success: function(data){
				for( var i = 0; i < data.partners.length; i++){
						console.log(data.partners);
						var o = data.partners[i];
						
						var pname = o.partner_name;
						var id = o.id;
						var jar_name = o.jar_file_name;
						var jar_file_loc = o.jar_file_location;
						var des = o.description;
						var proxy_service_port = o.proxy_service_port;
						var tpurl = o.tp_url;
						var ssr = o.service_state.running;
						var sss = o.service_state.stopped;
						if(ssr == 1){
							state = "Running";
							image = "status_success";
							start_button_class = "disabled";
							stop_button_class ="";
						}else{
							state = "Stopped";
							image = "status_error";
							start_button_class = "";
							stop_button_class = "disabled";
						}
						
						for(var j=0; j<o.certificates.length; j++){
							var c=o.certificates[j];
							var carray = [];
							
							var cid = c.certificate_id;
							var cname = c.certificate_name;
							var cloc = c.certificate_location;
							var uts = c.uploaded_timestamp
							carray.push(o.certificates);
						}
											
						var date = o.creation_timestamp;
						var lmts = o.last_modified_timestamp;
					
						$("#tbody").append("<tr><td>" + i + "</td> "
												+"	<td>"+ id +"</td> "
												+"	<td>"+ jar_name +"</td> "
												+"	<td>"+ des +"</td> "
												+"	<td><img src='images/"+image+".png' /> "+state+"</td> "
												+"	<td><a class='waves-effect waves-light btn start-button "+ start_button_class+" '>Start</a></td> "
												+"	<td><a class='waves-effect waves-light btn stop-button "+ stop_button_class+"'>Stop</a></td> "
												+"	<td><a class='waves-effect waves-light btn edit-button modal-trigger' href='#edit_modal'>Edit</a></td> "
												+"  <td style='display:none;'><p>"+JSON.stringify(carray)+"</p></td>"
											
											+"	</tr>");
						}
				},
			error: function(error){
			console.log(JSON.stringfy(error));
		}
	});
	$('.preloader-background').delay(500).fadeOut('slow');
//	$('.preloader-wrapper').delay(1000).fadeOut();
});
	</script>
	<script>
		$('.chips').material_chip();
		  $('.chips-initial').material_chip({
			data: [{
			  tag: 'Certificate_name_1',
			}, {
			  tag: 'Certificate_name_2',
			}, {
			  tag: 'Certificate_name_3',
			}],
		  });
	</script>
  </body>
</html>